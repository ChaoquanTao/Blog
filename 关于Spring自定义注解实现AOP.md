---
title: Spring自定义注解实现AOP
date: 2021-12-30 12:00:00
---

> 背景：事情是这样的，最近开发中需要实现一个给用户发送的消息的功能，具体来说，用户在执行一个任务时，我需要在任务开始前，执行中以及结束后给用户发送通知，我掐指一算，这必须AOP啊，于是就打算通过自定义注解来实现这个功能，于是就有了这篇文章。

这篇文章主要讨论两个问题：

1. 如何自定义注解
2. 自定义注解里都能做哪些事情？假如是针对方法的注解，那注解里都能获取到当前上下文中的哪些内容？因为如果我想在注解里发送消息，肯定是要依赖一些发送消息的模块的，这部分依赖能在注解里引入吗？

好了，正片开始。



## 关于AOP的实现

+ AspectJ：在编译器进行织入
+ 动态代理：基于反射
+ Cglib: 基于ASM

spring用哪个？

如果被代理类有接口实现，用动态代理，否则，用cglib.



如何实现aop

+ 借助spring提供的注解
+ 利用spring声明周期自行实现